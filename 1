class Url < ActiveRecord::Base
  has_many :payload_requests
  has_many :referrers, through: :payload_requests
  has_many :request_types, through: :payload_requests
  has_many :user_agents, through: :payload_requests

  validates :address, presence: true

  def self.most_to_least_requested
    group(:address).count.keys.reverse
  end

  def list_verbs_given_urls
    request_types.pluck(:verb)
  end

end
